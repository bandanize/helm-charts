replicaCount: 1

image:
  repository: ghcr.io/bandanize/backend
  pullPolicy: IfNotPresent
  tag: "" # Overrides the image tag whose default is the chart appVersion.

imagePullSecrets: []
nameOverride: ""
fullnameOverride: "backend"

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  type: ClusterIP
  port: 8080

# This block is for setting up the ingress for more information can be found here: https://kubernetes.io/docs/concepts/services-networking/ingress/
ingress:
  enabled: true
  className: "cloudflare-tunnel"
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: bandanize-api.rdvl.net
      paths:
        - path: /
          pathType: Prefix
  tls: []

resources: {}
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

env: []

# Application Properties (will be mounted as application.properties)
applicationProperties:
  spring.application.name: bandanize
  spring.datasource.driverClassName: org.postgresql.Driver
  spring.jpa.show-sql: "false"
  spring.jpa.properties.hibernate.dialect: org.hibernate.dialect.PostgreSQLDialect
  spring.jpa.database-platform: org.hibernate.dialect.PostgreSQLDialect
  management.endpoints.web.exposure.include: health
  management.endpoint.health.show-details: always
  spring.servlet.multipart.max-file-size: 10GB
  spring.servlet.multipart.max-request-size: 10GB
  storage.type: local
  resend.from.email: support@bandanize.com
  app.frontend.url: https://bandanize.com
  # Moved from env
  spring.datasource.url: "jdbc:postgresql://postgres:5432/bandanize"
  storage.location: "/app/uploads"
  spring.jpa.hibernate.ddl-auto: "update"
  # Security Configuration
  # CORS Allowed Origins (comma separated)
  app.cors.allowed-origins: "change-me"

  # JWT Configuration
  app.jwt.secret: "change-me"
  app.jwt.expiration: "36000000"
  app.jwt.reset-token.expiration: "900000"
  app.jwt.verification-token.expiration: "86400000"

# Secrets (will be injected as env vars)
secrets:
  SPRING_DATASOURCE_USERNAME: "change-me"
  SPRING_DATASOURCE_PASSWORD: "change-me"
  RESEND_API_KEY: "change-me"

persistence:
  enabled: true
  storageClass: "manual"
  accessMode: ReadWriteOnce
  size: 15Gi
  path: /app/uploads
  hostPath: /DATA/AppData/bandanize/uploads
